@base              <https://wikibus-sources.lndo.site/> .

@prefix hydra:     <http://www.w3.org/ns/hydra/core#> .
@prefix hydra-box: <http://hydra-box.org/schema/> .
@prefix code:      <https://code.described.at/> .
@prefix rdfs:      <http://www.w3.org/2000/01/rdf-schema#> .
@prefix schema:    <http://schema.org/> .
@prefix wbo:       <https://wikibus.org/ontology#> .
@prefix wba:       <https://wikibus.org/api#> .
@prefix dcterms:   <http://purl.org/dc/terms/> .
@prefix xsd:       <http://www.w3.org/2001/XMLSchema#> .

<api> a                    hydra:ApiDocumentation ;
      hydra:entrypoint     <> ;
      hydra:supportedClass hydra:Resource,
                           <api#Entrypoint>,
                           wbo:Source,
                           wba:EntryPoint .

wba:EntryPoint a                       hydra:Class ;
               hydra:supportedProperty [ hydra:property    wba:brochures ;
                                         hydra:writable    false ;
                                         hydra:title       "Brochures" ;
                                         hydra:description "Brochures and other promotional publications" ;
                                         hydra:readable    true ; ] ;
               hydra:supportedProperty [ hydra:property    wba:books ;
                                         hydra:writable    false ;
                                         hydra:title       "Books" ;
                                         hydra:description "Books about public transport history and manufacturers, etc." ;
                                         hydra:readable    true ; ] ;
.

wba:brochures a          hydra:Link ;
              rdfs:range wba:BrochureCollection ;
.

wba:books a          hydra:Link ;
          rdfs:range wba:BookCollection ;
.

hydra:Resource a                        hydra:Class ;
               hydra:supportedOperation [ a                  hydra:SupportedOperation ;
                                          hydra:title        "Get resource" ;
                                          hydra:method       "GET" ;
                                          code:implementedBy [ a         code:EcmaScript ;
                                                               code:link <node:@wikibus/hydra-box-helpers/handlers/hydraResource#get> ] ]
.

wbo:Source a                        hydra:Class ;
           hydra:supportedOperation [ a                  hydra:SupportedOperation ;
                                      hydra:title        "Get source" ;
                                      hydra:method       "GET" ;
                                      code:implementedBy [ a         code:EcmaScript ;
                                                           code:link <node:@wikibus/hydra-box-helpers/handlers/hydraResource#get> ] ]
.

wba:BrochureCollection a                        hydra:Class ;
                       hydra:supportedOperation [ a                   hydra:SupportedOperation ;
                                                  hydra:title         "Get brochures" ;
                                                  hydra-box:variables wba:BrochureCollection-search ;
                                                  hydra:method        "GET" ;
                                                  code:implementedBy  [ a         code:EcmaScript ;
                                                                        code:link <file:source-collection#get> ] ]
.

wba:BrochureCollection-search a                            hydra:IriTemplate ;
                              hydra:mapping                [ a                      hydra:IriTemplateMapping ;
                                                             hydra:property         dcterms:title ;
                                                             hydra:required         false ;
                                                             hydra:variable         "title" ;
                                                             hydra-box:queryPattern [ a         code:EcmaScript ;
                                                                                      code:link <file:filter/brochure#byTitle> ] ; ],
                                                           [ a                      hydra:IriTemplateMapping ;
                                                             hydra:property         wba:withPdfOnly ;
                                                             hydra:required         false ;
                                                             hydra:variable         "withPdfOnly" ;
                                                             hydra-box:queryPattern [ a         code:EcmaScript ;
                                                                                      code:link <file:filter/brochure#withPdfOnly> ] ; ],
                                                           [ a                      hydra:IriTemplateMapping ;
                                                             hydra:property         wba:withoutImages ;
                                                             hydra:required         false ;
                                                             hydra:variable         "withoutImages" ;
                                                             hydra-box:queryPattern [ a         code:EcmaScript ;
                                                                                      code:link <file:filter/brochure#withoutImages> ] ; ],
                                                           [ a                      hydra:IriTemplateMapping ;
                                                             hydra:property         schema:contributor ;
                                                             hydra:required         false ;
                                                             hydra:variable         "contributor" ;
                                                             hydra-box:queryPattern [ a         code:EcmaScript ;
                                                                                      code:link <file:filter/brochure#byContributor> ] ; ],
                                                           [ a                      hydra:IriTemplateMapping ;
                                                             hydra:property         dcterms:language ;
                                                             hydra:required         false ;
                                                             hydra:variable         "language" ;
                                                             hydra-box:queryPattern [ a         code:EcmaScript ;
                                                                                      code:link <file:filter/brochure#byLanguage> ] ; ],
                                                           [ a              hydra:IriTemplateMapping ;
                                                             hydra:property hydra:pageIndex ;
                                                             hydra:required false ;
                                                             hydra:variable "page" ; ] ;
                              hydra:template               "/brochures{?page,title,withPdfOnly,withoutImages,contributor,language}" ;
                              hydra:variableRepresentation hydra:BasicRepresentation ;
.

wba:withPdfOnly rdfs:range xsd:boolean .

wba:withoutImages rdfs:range xsd:boolean .

<> a           hydra:Class ;
   hydra:title "Wikibus sources home" ;
.
